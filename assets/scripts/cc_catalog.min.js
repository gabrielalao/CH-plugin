/*! cc_catalog 0.4.0 26-02-2014 */

var CC;!function(a){!function(a){var b=function(){function a(a){for(var b in a)this[b]=a[b]}return a}();a.Model=b}(a.Catalog||(a.Catalog={}));a.Catalog}(CC||(CC={}));var CC;!function(a){!function(b){!function(b){function c(b){return{lookup:a.Catalog.Utils.compact_obj({descriptor_name:b.descriptor_name,descriptor_value:b.descriptor_value,product_type_id:b.product_type_id,category_id:b.category_id})}}b.product_lookup=c}(b.Params||(b.Params={}));b.Params}(a.Catalog||(a.Catalog={}));a.Catalog}(CC||(CC={}));var CC;!function(a){!function(b){var c=function(){function b(a){this.url=a}return b.prototype.get=function(b,c){var d=this;c||(c=function(a){return a});{var e=Q.defer();a.Catalog.Utils.$.get(this.url,b).then(function(a){return e.resolve(c(a))},function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return e.reject(d.parse_error(a[0]))})}return e.promise},b.prototype.parse_error=function(b){return b.responseJSON?b.responseJSON:new a.Catalog.UnknownError(b)},b}();b.ApiRequest=c}(a.Catalog||(a.Catalog={}));a.Catalog}(CC||(CC={}));var CC;!function(a){!function(b){var c=function(){function b(a){this.config=a}return b.prototype.find=function(b){var c=this.base_url()+"/"+b,d=new a.Catalog.ApiRequest(c);return d.get({},function(b){return a.Catalog.Parsers.category(b.category)})},b.prototype.all=function(b){var c=new a.Catalog.ApiRequest(this.base_url()),d=b||{};return c.get(d,function(b){var c=a.Catalog.Utils.map(b.categories,a.Catalog.Parsers.category);return{categories:c,pagination:b.pagination}})},b.prototype.base_url=function(){return this.config.base_url+"/categories"},b}();b.CategoryResource=c}(a.Catalog||(a.Catalog={}));a.Catalog}(CC||(CC={}));var CC;!function(a){!function(b){var c=function(){function b(b){this.data=b,this.products=new a.Catalog.ProductResource(new a.Catalog.Config(b)),this.categories=new a.Catalog.CategoryResource(new a.Catalog.Config(b)),this.stores=new a.Catalog.StoreResource(new a.Catalog.Config(b))}return b}();b.Client=c}(a.Catalog||(a.Catalog={}));a.Catalog}(CC||(CC={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},CC;!function(a){!function(a){var b=function(){function a(){}return a.prototype.to=function(a){var b=this.mapping[a];if(void 0===b)throw new TypeError("Invalid value "+a+", expecting one of: "+Object.keys(this.mapping));return b},a.prototype.from=function(a){for(var b in this.mapping)if(a===this.mapping[b])return b},a}();a.StringIsomorphism=b;var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.to=function(b){return b?a.prototype.to.call(this,b):this.default_value},b}(b);a.DefaultingStringIsomorphism=c}(a.Catalog||(a.Catalog={}));a.Catalog}(CC||(CC={}));var CC;!function(a){!function(a){!function(a){function b(a){var b={term:a.term};return a.product_type_id&&(b.product_type_id=a.product_type_id),a.category_id&&(b.category_id=a.category_id),{search:b}}a.auto_complete_products_search=b}(a.Params||(a.Params={}));a.Params}(a.Catalog||(a.Catalog={}));a.Catalog}(CC||(CC={}));var CC;!function(a){!function(a){!function(a){function b(a){return{id:a.id,parent_id:a.parent_id,name:a.name,seoname:a.seoname,description:a.description,available_on:a.available_on&&new Date(a.available_on),set_code:a.set_code}}a.category=b}(a.Parsers||(a.Parsers={}));a.Parsers}(a.Catalog||(a.Catalog={}));a.Catalog}(CC||(CC={}));var CC;!function(a){!function(b){var c=function(a){function b(b){a.call(this,b),this.base_url||(this.base_url="https://catalog.crystalcommerce.com/api/v1")}return __extends(b,a),b}(a.Catalog.Model);b.Config=c}(a.Catalog||(a.Catalog={}));a.Catalog}(CC||(CC={}));var CC;!function(a){!function(b){!function(b){function c(b){var c=a.Catalog.Utils.map(b.descriptors,function(a,b){return{name:b,value:a}});return{buy_price:b.buy_price,store_credit_buy_price:b.store_credit_buy_price,sell_price:b.sell_price,qty:b.qty,wtb_qty:b.wtb_qty,variant_id:b.variant_id,descriptors:c,product_url:b.product_url,store:b.store}}b.offer=c}(b.Parsers||(b.Parsers={}));b.Parsers}(a.Catalog||(a.Catalog={}));a.Catalog}(CC||(CC={}));var CC;!function(a){!function(b){!function(b){function c(b){var c=a.Catalog.Utils.deep_clone(b),d=new a.Catalog.OfferOrderIso;return c.order=d.from(b.order),{offers:c,includes:["offers"]}}b.offers_search=c}(b.Params||(b.Params={}));b.Params}(a.Catalog||(a.Catalog={}));a.Catalog}(CC||(CC={}));var CC;!function(a){!function(b){!function(b){function c(b){var c=a.Catalog.Utils.map(b.descriptors,function(a,b){return{name:b,value:a}}),d=b.available_on&&new Date(b.available_on);return{id:b.id,asin:b.asin,available_on:d,barcode:b.barcode,category_id:b.category_id,category_name:b.category_name,description:b.description,descriptors:c,manufacturer_sku:b.manufacturer_sku,msrp:b.msrp,name:b.name,photo:b.photo,seoname:b.seoname,weight:b.weight}}function d(b){var d=b,e={local_offers:a.Catalog.Utils.map(b.local_offers,a.Catalog.Parsers.offer),web_offers:a.Catalog.Utils.map(b.web_offers,a.Catalog.Parsers.offer)};return a.Catalog.Utils.deep_merge(c(d),e)}b.product=c,b.product_with_offers=d}(b.Parsers||(b.Parsers={}));b.Parsers}(a.Catalog||(a.Catalog={}));a.Catalog}(CC||(CC={}));var CC;!function(a){!function(b){!function(b){function c(a){return{search:a}}function d(b,d){var e=c(b),f=a.Catalog.Params.offers_search(d);return e.includes||(e.includes=[]),e.includes.push("offers"),a.Catalog.Utils.deep_merge(e,f)}b.product_search=c,b.product_search_with_offers=d}(b.Params||(b.Params={}));b.Params}(a.Catalog||(a.Catalog={}));a.Catalog}(CC||(CC={}));var CC;!function(a){!function(a){var b=function(){function a(a){this.error="unknown_error",this.description=JSON.stringify(a)}return a}();a.UnknownError=b}(a.Catalog||(a.Catalog={}));a.Catalog}(CC||(CC={}));var CC;!function(a){!function(b){!function(a){a[a.LowestSellPrice=0]="LowestSellPrice",a[a.HighestBuyPrice=1]="HighestBuyPrice",a[a.HighestStoreCreditBuyPrice=2]="HighestStoreCreditBuyPrice"}(b.OfferOrder||(b.OfferOrder={}));var c=(b.OfferOrder,function(a){function b(){a.apply(this,arguments),this.mapping={lowest_sell_price:0,highest_buy_price:1,highest_store_credit_buy_price:2},this.default_value=0}return __extends(b,a),b}(a.Catalog.DefaultingStringIsomorphism));b.OfferOrderIso=c}(a.Catalog||(a.Catalog={}));a.Catalog}(CC||(CC={}));var CC;!function(a){!function(b){var c=function(){function b(a){this.config=a}return b.prototype.find=function(b){return this.generic_find(b,{},a.Catalog.Parsers.product)},b.prototype.lookup=function(b){return this.generic_lookup(b,{},a.Catalog.Parsers.product)},b.prototype.all=function(b,c){var d=new a.Catalog.ApiRequest(this.base_url()),e=a.Catalog.Utils.deep_merge(c,a.Catalog.Params.product_search(b));return d.get(e,function(b){var c=a.Catalog.Utils.map(b.products,a.Catalog.Parsers.product);return{products:c,pagination:b.pagination}})},b.prototype.all_with_offers=function(b,c,d){var e=new a.Catalog.ApiRequest(this.base_url()),f=a.Catalog.Utils.deep_merge(d,a.Catalog.Params.product_search_with_offers(b,c));return e.get(f,function(b){var c=a.Catalog.Utils.map(b.products,a.Catalog.Parsers.product_with_offers);return{products:c,pagination:b.pagination}})},b.prototype.auto_complete=function(b){var c=this.base_url()+"/auto_complete";return new a.Catalog.ApiRequest(c).get(a.Catalog.Params.auto_complete_products_search(b),function(a){return a.auto_complete_products})},b.prototype.find_with_offers=function(b,c){return this.generic_find(b,a.Catalog.Params.offers_search(c),a.Catalog.Parsers.product_with_offers)},b.prototype.lookup_with_offers=function(b,c){return this.generic_lookup(b,a.Catalog.Params.offers_search(c),a.Catalog.Parsers.product_with_offers)},b.prototype.generic_find=function(b,c,d){var e=this.base_url()+"/"+b;return new a.Catalog.ApiRequest(e).get(c,function(a){return d(a.product)})},b.prototype.generic_lookup=function(b,c,d){var e=this.base_url()+"/lookup",f=a.Catalog.Utils.deep_merge(a.Catalog.Params.product_lookup(b),c);return new a.Catalog.ApiRequest(e).get(f,function(a){return d(a.product)})},b.prototype.base_url=function(){return this.config.base_url+"/products"},b}();b.ProductResource=c}(a.Catalog||(a.Catalog={}));a.Catalog}(CC||(CC={}));var CC;!function(a){!function(b){var c=function(){function b(a){this.config=a}return b.prototype.all=function(){var b=new a.Catalog.ApiRequest(this.base_url());return b.get({},function(a){return a})},b.prototype.base_url=function(){return this.config.base_url+"/stores"},b}();b.StoreResource=c}(a.Catalog||(a.Catalog={}));a.Catalog}(CC||(CC={}));var CC;!function(a){!function(a){var b=jQuery,c=function(){function a(){}return a.compact_obj=function(a){var b={};for(var c in a)a[c]&&(b[c]=a[c]);return b},a.deep_clone=function(a){var c={};return b.extend(!0,c,a)},a.deep_merge=function(){for(var a=[],c=0;c<arguments.length-0;c++)a[c]=arguments[c+0];var d=!0;return b.extend.apply(b,[d].concat(a))},a.params=function(a){return b.param(a)},a.$=b,a.map=b.map,a}();a.Utils=c}(a.Catalog||(a.Catalog={}));a.Catalog}(CC||(CC={}));
//# sourceMappingURL=cc_catalog.min.map